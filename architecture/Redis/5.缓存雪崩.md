# 缓存雪崩
- 定义：
  -  缓存雪崩是指大量的应用请求无法在 Redis 缓存中进行处理，紧接着，应用将大量请求发送到数据库层，导致数据库层的压力激增。
- 原因：
  - 1、缓存中有大量数据同时过期，导致大量请求无法得到处理。
    - 解决方案
      - 1、给缓存数据的过期时间上加上小的随机数，避免同时过期
      - 2、服务降级（分场景处理）
        - 当业务应用访问的是非核心数据(例如电商商品属性)时，暂时停止从缓存中查询这些数据，而是直接返回预定义信息、空值或是错误信息; 
        - 当业务应用访问的是核心数据(例如电商商品库存)时，仍然允许查询缓存，如果缓存缺失，也可以继续通过数据库读取。
  - 2、Redis 缓存实例发生故障宕机了，无法处理请求，这就会导致大量请求一下子积压到数据库层，从而发生缓存雪崩。
    - 解决方案
      - 1、在业务系统中实现服务熔断或请求限流机制。
        - 服务熔断（暂停业务应用对缓存系统的接口访问。再具体点说，就是业务应用调用缓存接口 时，缓存客户端并不把请求发给 Redis 缓存实例，而是直接返回，等到 Redis 缓存实例重新恢复服务后，再允许应用请求发送到缓存系统。）
        - 请求限流（在业务系统的请求入口前端控制每秒进入系统的请求数，避免过多的请求被发送到数据库。）
      - 2、事前预防
        - Redis部署主从集群+哨兵，主节点宕机后，哨兵可以及时把从节点提升为主，继续提供服务